<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordCount Pro - 离线统计工具</title>
    <!-- 引入 Tailwind CSS 用于样式（联网时效果更佳，离线时基础布局依然有效） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .stat-card { transition: all 0.3s ease; }
        .progress-bar { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        textarea::placeholder { color: #cbd5e1; }
    </style>
</head>
<body class="bg-[#F8F9FA] text-[#1A1A1A] antialiased">
    <div class="max-w-5xl mx-auto px-6 py-12">
        <!-- 头部 -->
        <header class="mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4">
            <div>
                <h1 class="text-4xl font-semibold tracking-tight text-slate-900">
                    WordCount <span class="text-indigo-600">Pro</span>
                </h1>
                <p class="text-slate-500 mt-2">专业的本地文本统计工具 · 隐私安全 · 离线可用</p>
            </div>
            <div class="flex gap-2">
                <button onclick="copyText()" class="px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-medium hover:bg-slate-50 shadow-sm flex items-center gap-2">
                    <span id="copyStatus">复制全文</span>
                </button>
                <button onclick="clearText()" class="px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-medium text-rose-600 hover:bg-rose-50 shadow-sm">
                    清空
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 输入区 -->
            <div class="lg:col-span-2">
                <div class="relative bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
                    <textarea id="textInput" oninput="updateStats()" placeholder="在此输入或粘贴您的文本..." 
                        class="w-full h-[500px] p-8 outline-none resize-none text-lg leading-relaxed"></textarea>
                    <div class="absolute bottom-6 right-8 text-slate-400 text-sm font-mono">
                        <span id="charCountDisplay">0</span> characters
                    </div>
                </div>
            </div>

            <!-- 统计区 -->
            <div class="space-y-6">
                <!-- 基础统计 -->
                <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm stat-card">
                    <h2 class="font-semibold text-slate-800 mb-6 flex items-center gap-2">
                        <span class="w-2 h-2 bg-indigo-500 rounded-full"></span> 基础统计
                    </h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-end">
                            <span class="text-slate-500 text-sm">文字与标点</span>
                            <span id="basicCount" class="text-3xl font-light text-slate-900">0</span>
                        </div>
                        <div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                            <div id="basicProgress" class="progress-bar h-full bg-indigo-500" style="width: 0%"></div>
                        </div>
                        <p class="text-[11px] text-slate-400">不包含空格、换行符等</p>
                    </div>
                </div>

                <!-- 高级统计 -->
                <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm stat-card">
                    <h2 class="font-semibold text-slate-800 mb-6 flex items-center gap-2">
                        <span class="w-2 h-2 bg-emerald-500 rounded-full"></span> 高级统计
                    </h2>
                    <div class="space-y-4" id="advancedStats">
                        <!-- 动态插入统计项 -->
                    </div>
                    <div class="mt-8 pt-6 border-t border-slate-100 flex justify-between items-center">
                        <span class="text-slate-500 font-medium text-sm">总字符数</span>
                        <span id="totalCount" class="text-xl font-semibold text-slate-900">0</span>
                    </div>
                </div>
            </div>
        </main>

        <footer class="mt-16 text-center text-slate-400 text-sm">
            <p>WordCount Pro · 纯本地运行 · 保护您的数据隐私</p>
        </footer>
    </div>

    <script>
        const input = document.getElementById('textInput');
        
        function updateStats() {
            const text = input.value;
            const total = text.length;
            
            // 统计逻辑
            const chinese = (text.match(/[\u4e00-\u9fa5]/g) || []).length;
            const english = (text.match(/[a-zA-Z]/g) || []).length;
            const numbers = (text.match(/[0-9]/g) || []).length;
            const spaces = (text.match(/\s/g) || []).length;
            // 匹配标点符号
            const punctuation = (text.match(/[\u3002\uff0c\uff1f\uff01\uff1a\uff1b\u3001\u201c\u201d\u2018\u2019\uff08\uff09\u300a\u300b\u3008\u3009\u3010\u3011\u300e\u300f\u300c\u300d\ufe43\ufe44\u3014\u3015\u2026\u2014\uff5e\ufe4f\uffe5]|[.,\/#!$%\^&\*;:{}=\-_`~()]/g) || []).length;
            const others = total - chinese - english - numbers - spaces - punctuation;
            
            const basicCount = chinese + english + numbers + punctuation;

            // 更新 UI
            document.getElementById('charCountDisplay').innerText = total.toLocaleString();
            document.getElementById('totalCount').innerText = total.toLocaleString();
            document.getElementById('basicCount').innerText = basicCount.toLocaleString();
            document.getElementById('basicProgress').style.width = total > 0 ? (basicCount / total * 100) + '%' : '0%';

            const advancedData = [
                { label: '中文字符', value: chinese, color: 'bg-blue-500' },
                { label: '英文字母', value: english, color: 'bg-indigo-500' },
                { label: '数字', value: numbers, color: 'bg-amber-500' },
                { label: '标点符号', value: punctuation, color: 'bg-rose-500' },
                { label: '空格/换行', value: spaces, color: 'bg-slate-400' },
                { label: '其他符号', value: others, color: 'bg-purple-500' }
            ];

            const container = document.getElementById('advancedStats');
            container.innerHTML = advancedData.map(item => `
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-xs font-medium text-slate-600">${item.label}</span>
                        <span class="text-xs font-semibold text-slate-900">${item.value.toLocaleString()}</span>
                    </div>
                    <div class="w-full bg-slate-50 h-1 rounded-full overflow-hidden">
                        <div class="progress-bar h-full ${item.color}" style="width: ${total > 0 ? (item.value / total * 100) : 0}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function clearText() {
            input.value = '';
            updateStats();
        }

        function copyText() {
            input.select();
            document.execCommand('copy');
            const btn = document.getElementById('copyStatus');
            btn.innerText = '已复制！';
            setTimeout(() => btn.innerText = '复制全文', 2000);
        }

        // 初始化
        updateStats();
    </script>
</body>
</html>